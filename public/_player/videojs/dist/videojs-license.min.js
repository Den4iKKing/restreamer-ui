/*! @name videojs-license @version 0.1.0 @license MIT */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js"),require("global/document")):"function"==typeof define&&define.amd?define(["video.js","global/document"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).videojsLicense=t(e.videojs,e.document)}(this,(function(e,t){"use strict";function l(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=l(e),o=l(t);function i(e,t,l){return e(l={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&l.path)}},l.exports),l.exports}var s=i((function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.default=e.exports,e.exports.__esModule=!0})),r=i((function(e){function t(l,n){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,t(l,n)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0})),a=i((function(e){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0})),c=n.default.getPlugin("plugin"),u=n.default.getComponent("Component"),d=n.default.getComponent("MenuButton"),p={license:"none",title:"",author:"",languages:{license:"License",loading:"Loading"}},f=function(e){function t(t,l){var i;return(i=e.call(this,t)||this).playerId=i.player.id(),i.options=n.default.mergeOptions(p,l),"none"===l.license?s(i):(i.player.ready((function(){i.player.addClass("vjs-license"),i.buildUI(),(n.default.browser.IS_IOS||n.default.browser.IS_ANDROID)&&i.mobileBuildUI()})),i.player.on("userinactive",(function(){o.default.getElementById(i.playerId).querySelectorAll(".vjs-menu").forEach((function(e){e.classList.remove("vjs-lock-open")}))})),i.player.on("click",(function(e){"VIDEO"===e.target.tagName&&o.default.getElementById(i.playerId).querySelectorAll(".vjs-menu").forEach((function(e){e.classList.remove("vjs-lock-open")}))})),i.player.on("loadstart",(function(e){i.removeElementsByClass("vjs-license-clear"),n.default.browser.IS_IOS||n.default.browser.IS_ANDROID?i.mobileBuildTopLevelMenu():i.buildTopLevelMenu()})),i)}a(t,e);var l=t.prototype;return l.buildUI=function(){var e=this.playerId,t=this,l=function(l){function o(n,o){var i;return(i=l.call(this,n,o)||this).addClass("vjs-license"),i.controlText(t.options.languages.loading),n.one("canplaythrough",(function(e){i.controlText(t.options.languages.settings)})),i.menu.contentEl_.id=e+"-vjs-license-default",i}return a(o,l),o.prototype.handleClick=function(){n.default.browser.IS_IOS||n.default.browser.IS_ANDROID?this.player.getChild("licenseMenuMobileModal").el().style.display="block":(this.el().classList.toggle("vjs-toogle-btn"),this.menu.el().classList.toggle("vjs-lock-open"))},o}(d);n.default.registerComponent("licenseMenuButton",l),this.player.getChild("controlBar").addChild("licenseMenuButton"),this.player.getChild("controlBar").getChild("fullscreenToggle")&&this.player.getChild("controlBar").el().insertBefore(this.player.getChild("controlBar").getChild("licenseMenuButton").el(),this.player.getChild("controlBar").getChild("fullscreenToggle").el())},l.buildTopLevelMenu=function(){var e=this.player.getChild("controlBar").getChild("licenseMenuButton").menu.contentEl_;e.innerHTML="",e.classList.add("vjs-license-top-level");var t=o.default.createElement("li");t.className="vjs-license-top-level-header";var l=o.default.createElement("span");l.innerHTML="About",l.className="vjs-license-top-level-header-titel",t.appendChild(l),e.appendChild(t);var n=o.default.createElement("li");if(n.innerHTML=this.buildItemTitel(),n.className="vjs-license-top-level-item",e.appendChild(n),this.options.author){var i=o.default.createElement("li");i.innerHTML=this.buildItemAuthor(),i.className="vjs-license-top-level-item",e.appendChild(i)}var s=o.default.createElement("li");s.innerHTML=this.buildItemLicense(),s.className="vjs-license-top-level-item",e.appendChild(s)},l.mobileBuildUI=function(){var e=function(e){function t(t,l){return e.call(this,t,l)||this}return a(t,e),t.prototype.createEl=function(){return n.default.createEl("div",{className:"vjs-license-mobile"})},t}(u);n.default.registerComponent("licenseMenuMobileModal",e),n.default.dom.prependTo(this.player.addChild("licenseMenuMobileModal").el(),o.default.body)},l.mobileBuildTopLevelMenu=function(){var e=this,t=this.player.getChild("licenseMenuMobileModal"),l=o.default.createElement("ul");l.className="vjs-license-mob-top-level vjs-setting-menu-clear",t.el().appendChild(l);var n=o.default.createElement("li");n.innerHTML="About",n.className="vjs-setting-menu-mobile-top-header",l.appendChild(n);var i=o.default.createElement("li");if(i.innerHTML=this.buildItemTitel(),i.className="vjs-license-top-level-item",this.options.author){var s=o.default.createElement("li");s.innerHTML=this.buildItemAuthor(),s.className="vjs-license-top-level-item"}var r=o.default.createElement("li");r.innerHTML=this.buildItemLicense(),r.className="vjs-license-top-level-item";var a=o.default.createElement("li");a.innerHTML="Close",a.className="setting-menu-footer-default",a.onclick=function(t){e.player.getChild("settingsMenuMobileModal").el().style.display="none"},l.appendChild(a)},l.buildItemTitel=function(){var e="";return this.options.title&&(e=""+this.options.title),"Title: "+e},l.buildItemAuthor=function(){var e="";return this.options.author&&(e=" by "+this.options.author),"Author: "+e},l.buildItemLicense=function(){var e=new RegExp("[0-9]+.[0-9]+$"),t="4.0",l=this.options.license.match(e);null!==l&&(t=l[0]);var n=null;switch(this.options.license.replace(e,"").trim()){case"CC0":n="https://creativecommons.org/licenses/zero/1.0/";break;case"CC BY":n="https://creativecommons.org/licenses/by/"+t+"/";break;case"CC BY-SA":n="https://creativecommons.org/licenses/by-sa/"+t+"/";break;case"CC BY-NC":n="https://creativecommons.org/licenses/by-nc/"+t+"/";break;case"CC BY-NC-SA":n="https://creativecommons.org/licenses/by-nc-sa/"+t+"/";break;case"CC BY-ND":n="https://creativecommons.org/licenses/by-nd/"+t+"/";break;case"CC BY-NC-ND":n="https://creativecommons.org/licenses/by-nc-nd/"+t+"/"}return"License: "+(n?'<a href="'+n+'" onclick="window.open(\''+n+'\')" target="_blank" rel="noopener">'+this.options.license+"</a>":this.options.license)},l.removeElementsByClass=function(e){o.default.querySelectorAll(".vjs-sm-top-level").forEach((function(e){e.classList.remove("vjs-hidden")}));for(var t=o.default.getElementsByClassName(e);t.length>0;)t[0].parentNode.removeChild(t[0])},t}(c);return f.defaultState={},f.VERSION="0.1.0",n.default.registerPlugin("license",f),f}));
